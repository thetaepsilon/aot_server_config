#!/bin/sh
# version 1

if test "$#" -lt 2; then {
	echo "# Usage: $0 <tmux socket name> command [args...]" >&2;
	exit 1;
}; fi;

s="$1"; shift;

# init server; as it forks to the background,
# when we exit systemd will pick that up under "Forking" service type.
echo "# session start:" "$@";
tmux -L "$s" new-session -s minetest -d "$*" || exit $?;

echo "# init complete";
