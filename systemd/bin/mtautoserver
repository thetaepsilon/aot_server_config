#!/bin/sh
# version 1

instance="$1";
if test -z "$instance"; then {
	echo "# no server instance specified." >&2;
	exit 1;
}; fi;

# this could be set by e.g. Enviroment=... in systemd scripts if overrides are needed.
if test -z "$MINETEST_INSTANCE_BASE_DIR"; then {
	export MINETEST_INSTANCE_BASE_DIR="/var/lib/minetest";
}; fi;
datadir="$MINETEST_INSTANCE_BASE_DIR/$instance"
minetest --server \
	--world "$datadir/world" \
	--logfile "$datadir/logs/minetest.debug.log" \
	--config "$datadir/minetest.conf" \
	--terminal 2>"$datadir/logs/minetest.startup.log";

